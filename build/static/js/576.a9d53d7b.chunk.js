"use strict";(self.webpackChunkpools_fe=self.webpackChunkpools_fe||[]).push([[576],{47576:function(e,l,a){a.r(l),a.d(l,{default:function(){return P}});var n,i=a(1413),r=a(37762),o=a(93433),t=a(29439),s=a(66776),d=a(44695),p=a(57468),c=a(91541),u=a(83734),v=a(25886),m=a(36755),f=a(87309),g=a(72791),h=a(61134),x=a(59434),y=a(57689),j=a(16254),b=a(85798),Z=a(34457),_=a(62797),k=_.Ry({title:_.Z_().required(),appid:_.Z_().required(),summary:_.Z_().required(),full_description:_.Z_().required(),country_of_service:_.Z_().required(),category:_.Z_().required(),type:_.Z_().required(),free:_.Z_().required(),price:_.Z_().max(8,"Price must be less than 8 digits number"),cover:_.nK().test("fileSize","The file is too large",(function(e){var l;return!e||0===(null===e||void 0===e||null===(l=e.fileList)||void 0===l?void 0:l.length)||(!e.fileList||e.fileList[0].size/1024/1024<2)})).test("image-type","The type must be image/jpeg or image/png",(function(e){var l;if(!e||0===(null===e||void 0===e||null===(l=e.fileList)||void 0===l?void 0:l.length))return!0;if(e.fileList){var a,n=(0,r.Z)(e.fileList);try{for(n.s();!(a=n.n()).done;){var i=a.value;return"image/jpeg"===i.type||"image/png"===i.type}}catch(o){n.e(o)}finally{n.f()}}return!0})),apkfile:_.nK().test("fileSize","The file is too large",(function(e){var l;return!e||0===(null===e||void 0===e||null===(l=e.fileList)||void 0===l?void 0:l.length)||(!e.fileList||e.fileList[0].size/1024/1024<200)})),images:_.nK().test("image-type","The type must be image/jpeg or image/png",(function(e){var l;if(!e||0===(null===e||void 0===e||null===(l=e.fileList)||void 0===l?void 0:l.length))return!0;if(e.fileList){var a,n=(0,r.Z)(e.fileList);try{for(n.s();!(a=n.n()).done;){var i=a.value;return"image/jpeg"===i.type||"image/png"===i.type}}catch(o){n.e(o)}finally{n.f()}}return!0})).test("fileLength","You must upload at least 2 images and max is 10 images",(function(e){var l,a,n;return!e||0===(null===e||void 0===e||null===(l=e.fileList)||void 0===l?void 0:l.length)||!((null===e||void 0===e||null===(a=e.fileList)||void 0===a?void 0:a.length)<2)&&!((null===e||void 0===e||null===(n=e.fileList)||void 0===n?void 0:n.length)>10)}))}).required(),w=[{locale_code:"nft",title:"NFT"},{locale_code:"metaverse",title:"Metaverse"},{locale_code:"play-to-earn",title:"Play To Earn"}],N=[{locale_code:"1",id:1,title:"Pay"},{locale_code:"0",id:2,title:"Free"}],C=a(30168),L=a(54088).ZP.div(n||(n=(0,C.Z)(["\n  padding: 1rem;\n  &&& {\n    .ant-form-item-label {\n      width: 20%;\n      text-align: left;\n    }\n\n    .ant-select {\n      width: 100%;\n    }\n  }\n  form {\n    width: 80%;\n    margin: auto;\n    .error_message {\n      color: red;\n    }\n    .locale {\n      margin-bottom: 2.4rem;\n      display: flex;\n      p {\n        width: 25%;\n      }\n    }\n  }\n  .step_group {\n    margin: auto;\n    display: flex;\n    justify-content: space-between;\n    .btn-group {\n      display: flex;\n    }\n    .btn {\n      width: 30rem;\n    }\n  }\n  .cover-wrapper {\n    margin-top: 2rem;\n    text-transform: uppercase;\n  }\n  .cover {\n    width: 50%;\n    border-radius: 5px;\n    margin-top: 1rem;\n  }\n  .screenshots-wrapper {\n    margin-top: 1rem;\n    .screenshots {\n      display: flex;\n      gap: 5rem;\n      flex-wrap: wrap;\n      flex-direction: column;\n      .image {\n        width: 100%;\n        display: flex;\n        padding: 1rem;\n        border-radius: 5px;\n        box-shadow: rgb(99 99 99 / 20%) 0px 2px 8px 0px;\n      }\n      .screenshot {\n        width: 20%;\n        aspect-ratio: 2/1;\n\n        img {\n          height: 100%;\n        }\n      }\n    }\n  }\n"]))),A=a(27387),T=a(80184),E=p.Z.Dragger;function P(){var e,l,a=(0,x.I0)(),n=(0,y.UO)(),p=(0,h.cI)({defaultValues:{apkfile:[],cover:[],images:[]},resolver:(0,d.X)(k)}),_=(p.register,p.getValues),C=p.control,P=p.handleSubmit,S=p.reset,q=p.setError,I=p.setValue,O=p.formState.errors,D=(0,x.v9)((function(e){return e.detailApp})),F=D.languages,V=D.categories,z=D.isLoading,Q=D.detailAppWithLang,U=(null===Q||void 0===Q||null===(e=Q.data)||void 0===e||null===(l=e.app)||void 0===l||l.images,(0,g.useState)([])),R=(0,t.Z)(U,2),J=(R[0],R[1],(0,g.useState)(!0)),K=(0,t.Z)(J,2),Y=K[0],$=K[1],M=(0,g.useState)(""),W=(0,t.Z)(M,2),X=W[0],B=W[1];(0,g.useEffect)((function(){a((0,j.bT)())}),[]);var G=[{name:"category",label:"Category",data:V},{name:"type",label:"Type",data:w},{name:"free",label:"Cost",data:N},{name:"country_of_service",label:"Country Of Service",data:F}],H=function(e){var l,a=null===(l=e.data)||void 0===l?void 0:l.map((function(e){return{value:e.locale_code||e.id,label:e.language||e.title}}));return[{value:"",label:"Select App ".concat(e.label),disabled:!0}].concat((0,o.Z)(a))};(0,g.useEffect)((function(){var e,l,a=Object.keys(_()),n={};if(Q){var i,o,t,s;"1"===(null===Q||void 0===Q||null===(i=Q.data)||void 0===i||null===(o=i.app)||void 0===o?void 0:o.is_pay)?$(!1):"0"===(null===Q||void 0===Q||null===(t=Q.data)||void 0===t||null===(s=t.app)||void 0===s?void 0:s.is_pay)&&$(!0);var d,p=(0,r.Z)(a);try{for(p.s();!(d=p.n()).done;){var c=d.value;if("locale"===c)n[c]="";else if("type"===c)switch(null===Q||void 0===Q||null===(e=Q.data)||void 0===e||null===(l=e.app)||void 0===l?void 0:l.type){case"1":n[c]="nft";break;case"2":n[c]="metaverse";break;default:n[c]="play-to-earn"}else if("full_description"===c){var u;n[c]=null===Q||void 0===Q||null===(u=Q.data)||void 0===u?void 0:u.info.description}else if("country_of_service"===c){var v;n[c]=null===Q||void 0===Q||null===(v=Q.data)||void 0===v?void 0:v.info.country}else if("free"===c){var m,f;n[c]=null===Q||void 0===Q||null===(m=Q.data)||void 0===m||null===(f=m.app)||void 0===f?void 0:f.is_pay}else{var g,h;n[c]=(null===Q||void 0===Q||null===(g=Q.data)||void 0===g?void 0:g.app[c])||(null===Q||void 0===Q||null===(h=Q.data)||void 0===h?void 0:h.info[c])}}}catch(x){p.e(x)}finally{p.f()}}S(n)}),[Q]);var ee={listType:"picture",accept:"image/png, image/jpeg",multiple:!1,action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",onChange:function(e){},onDrop:function(e){}},le=function(e){I("free",e),console.log(e),"1"===e?$(!1):"0"===e&&$(!0)};console.log(_(),O),(0,g.useEffect)((function(){var e;Object.keys(F).length>0&&a((0,j.$J)({slug:null===n||void 0===n?void 0:n.slug,lang:null===(e=F[0])||void 0===e?void 0:e.code}))}),[F]);return console.log(Q),(0,T.jsxs)(L,{children:[(0,T.jsx)("h1",{style:{textAlign:"center"},children:"EDIT APP"}),(0,T.jsxs)(c.Z,{onFinish:P((function(e){var l,n,i=Object.assign(_(),{locale:X});if(Y||void 0!==i.price)if(null!==Q&&void 0!==Q&&null!==(l=Q.data)&&void 0!==l&&null!==(n=l.app)&&void 0!==n&&n.screenshots||i.images){for(var r=0,t=Object.keys(i);r<t.length;r++){var s,d,p,c,u=t[r];if("cover"===u)if(null!==(s=i.cover)&&void 0!==s&&s.file)i.cover=null===(d=i.cover.file)||void 0===d?void 0:d.originFileObj;else i.cover=null===Q||void 0===Q||null===(p=Q.data)||void 0===p||null===(c=p.app)||void 0===c?void 0:c.cover;else if("apkfile"===u){var v,m,f,g;if(null!==(v=i.apkfile)&&void 0!==v&&v.file)i.apkfile=null===(m=i.apkfile.file)||void 0===m?void 0:m.originFileObj;else i.apkfile=null===Q||void 0===Q||null===(f=Q.data)||void 0===f||null===(g=f.app)||void 0===g?void 0:g.file_apk}else if("images"===u){var h;null!==(h=i.images)&&void 0!==h&&h.fileList&&(i.images=(0,o.Z)(i.images.fileList))}}console.log(i);var x=(0,A.x)(i);a((0,j.rf)(x))}else q("images",{type:"required",message:"Images is required"});else q("price",{type:"required",message:"Price is required when you set app is Pay"})})),children:[Object.keys(F).length>0?(0,T.jsxs)("div",{className:"locale",children:[(0,T.jsx)("p",{children:"Locale :"}),(0,T.jsx)(u.Z,{defaultValue:"",onChange:function(e){S({}),B(e),a((0,j.$J)({slug:null===n||void 0===n?void 0:n.slug,lang:e}))},options:[{value:"",label:"Choo App locale to edit",disabled:!0}].concat((0,o.Z)(F.map((function(e,l){return{value:e.code,label:e.language}}))))})]}):(0,T.jsx)(b.Z,{}),""!==X&&(0,T.jsx)(T.Fragment,{children:z?(0,T.jsx)(b.Z,{}):(0,T.jsxs)(T.Fragment,{children:[[{name:"appid",label:"App ID",placeholder:"Enter App ID",disabled:!0},{name:"title",label:"Title",placeholder:"Enter App Title"},{name:"summary",label:"Summary",placeholder:"Enter Summary"},{name:"full_description",label:"Description",placeholder:"Enter Description"},{name:"recent_change",label:"Recent Change",placeholder:"Enter Recent Change"},{name:"app_version",label:"App Version",placeholder:"Enter App Version"},{name:"privacy_policy",label:"Privacy Policy",placeholder:"Enter Privacy Policy"},{name:"term_of_policy",label:"Term Of Policy",placeholder:"Enter Term Of Policy"},{name:"app_support",label:"App Support",placeholder:"Enter App Support"}].map((function(e,l){return(0,T.jsx)(h.Qr,{control:C,name:e.name,render:function(l){var a,n=l.field;return(0,T.jsxs)(c.Z.Item,{label:e.label,children:[(0,T.jsx)(v.Z,(0,i.Z)((0,i.Z)({disabled:(null===e||void 0===e?void 0:e.disabled)||!1},n),{},{placeholder:e.placeholder,type:e.type||"text"})),(0,T.jsx)("p",{className:"error_message",children:null===(a=O[e.name])||void 0===a?void 0:a.message})]})}},l)})),G.map((function(e,l){return(0,T.jsx)(h.Qr,{control:C,name:e.name,render:function(l){var a,n=l.field;return(0,T.jsxs)(c.Z.Item,{label:e.label,children:[(0,T.jsx)(u.Z,(0,i.Z)((0,i.Z)({},n),{},{defaultValue:"",onChange:"free"===e.name?le:n.onChange,options:H(e)})),(0,T.jsx)("p",{className:"error_message",children:null===(a=O[e.name])||void 0===a?void 0:a.message})]})}},l)})),!Y&&(0,T.jsx)(h.Qr,{control:C,name:"price",render:function(e){var l,a=e.field;return(0,T.jsxs)(c.Z.Item,{label:"App Price",children:[(0,T.jsx)(v.Z,(0,i.Z)((0,i.Z)({},a),{},{placeholder:"Enter App price",type:"number"})),(0,T.jsx)("p",{className:"error_message",children:null===O||void 0===O||null===(l=O.price)||void 0===l?void 0:l.message})]})}}),(0,T.jsx)(h.Qr,{control:C,name:"cover",render:function(e){var l,a,n,r,o,t=e.field;return(0,T.jsxs)(c.Z.Item,{label:"App avatar",children:[(0,T.jsxs)(E,(0,i.Z)((0,i.Z)((0,i.Z)({},ee),t),{},{maxCount:1,listType:"picture",accept:"image/png, image/jpeg",children:[(0,T.jsx)("p",{className:"ant-upload-drag-icon",children:(0,T.jsx)(s.Z,{})}),(0,T.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),(0,T.jsx)("p",{className:"ant-upload-hint",children:"Upload your new avatar"})]})),(null===Q||void 0===Q||null===(l=Q.data)||void 0===l||null===(a=l.app)||void 0===a?void 0:a.cover)&&(0,T.jsxs)("div",{className:"cover-wrapper",children:[(0,T.jsx)("p",{children:"Current Cover :"}),(0,T.jsx)(m.Z,{preview:!1,src:"".concat(Z.dz,"/").concat(null===Q||void 0===Q||null===(n=Q.data)||void 0===n||null===(r=n.app)||void 0===r?void 0:r.cover),alt:"Current Cover",className:"cover"})]}),(0,T.jsx)("p",{className:"error_message",children:null===(o=O.cover)||void 0===o?void 0:o.message})]})}}),(0,T.jsx)(h.Qr,{control:C,name:"images",render:function(e){var l,n,r,o,t,d=e.field;return(0,T.jsxs)(c.Z.Item,{label:"App Images",children:[(0,T.jsxs)(E,(0,i.Z)((0,i.Z)({},d),{},{multiple:!0,listType:"picture",accept:"image/png, image/jpeg",children:[(0,T.jsx)("p",{className:"ant-upload-drag-icon",children:(0,T.jsx)(s.Z,{})}),(0,T.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),(0,T.jsx)("p",{className:"ant-upload-hint",children:"Upload your new app's screenshot"})]})),(0,T.jsxs)("div",{className:"screenshots-wrapper",children:[(0,T.jsxs)("p",{style:{textTransform:"uppercase",margin:"3rem 0"},children:["Current Screenshots:"," "]}),(0,T.jsx)("div",{className:"screenshots",children:(null===Q||void 0===Q||null===(l=Q.data)||void 0===l||null===(n=l.app)||void 0===n?void 0:n.screenshots)&&JSON.parse(null===Q||void 0===Q||null===(r=Q.data)||void 0===r||null===(o=r.app)||void 0===o?void 0:o.screenshots).map((function(e,l){return(0,T.jsxs)("div",{className:"image",children:[(0,T.jsx)(m.Z,{className:"screenshot",style:{marginTop:"1rem",borderRadius:"1rem"},preview:!1,src:"".concat(Z.dz).concat(e),alt:"screenshot"},l),(0,T.jsx)(f.Z,{type:"danger",onClick:function(){return function(e){var l,n;a((0,j.Yw)({name_image:e,appid:null===Q||void 0===Q||null===(l=Q.data)||void 0===l||null===(n=l.app)||void 0===n?void 0:n.appid}))}(e)},children:"x"})]})}))})]}),(0,T.jsx)("p",{className:"error_message",children:null===(t=O.images)||void 0===t?void 0:t.message})]})}}),(0,T.jsx)(h.Qr,{control:C,name:"apkfile",render:function(e){var l,a,n,r,o,t=e.field;return(0,T.jsxs)(c.Z.Item,{label:"App Apk",children:[(0,T.jsxs)(E,(0,i.Z)((0,i.Z)({},t),{},{multiple:!1,accept:".apk",children:[(0,T.jsx)("p",{className:"ant-upload-drag-icon",children:(0,T.jsx)(s.Z,{})}),(0,T.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),(0,T.jsx)("p",{className:"ant-upload-hint",children:"Upload your new apk"})]})),(0,T.jsx)("p",{className:"error_message",children:null===(l=O.apkfile)||void 0===l?void 0:l.message}),(null===Q||void 0===Q||null===(a=Q.data)||void 0===a||null===(n=a.app)||void 0===n?void 0:n.file_apk)&&(0,T.jsx)("p",{style:{border:"1px dashed black",padding:"1rem",marginTop:"2rem",cursor:"not-allowed"},children:(0,Z.UO)(null===Q||void 0===Q||null===(r=Q.data)||void 0===r||null===(o=r.app)||void 0===o?void 0:o.file_apk)})]})}})]})}),""!==X&&(0,T.jsx)(f.Z,{htmlType:"submit",children:"Update App"})]})]})}}}]);
//# sourceMappingURL=576.a9d53d7b.chunk.js.map